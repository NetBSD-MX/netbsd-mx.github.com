<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Grupo de Usuarios de NetBSD en México</title><link href="http://www.netbsd.mx/" rel="alternate"></link><link href="http://www.netbsd.mx/feeds/redes.atom.xml" rel="self"></link><id>http://www.netbsd.mx/</id><updated>2013-07-22T16:15:00-05:00</updated><entry><title>WPA</title><link href="http://www.netbsd.mx/wpa.html" rel="alternate"></link><updated>2013-07-22T16:15:00-05:00</updated><author><name>Francisco Valladolid</name></author><id>tag:www.netbsd.mx,2013-07-22:wpa.html</id><summary type="html">&lt;div class="section" id="requisitos"&gt;
&lt;h2&gt;Requisitos&lt;/h2&gt;
&lt;p&gt;Se requiere NetBSD 4 o superior.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="que-es"&gt;
&lt;h2&gt;Que es ?&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="http://es.wikipedia.org/wiki/Wi-Fi_Protected_Access"&gt;WPA&lt;/a&gt; del ingles
WiFi Protected Access, es un medio usado para proteger redes
inalambricas. NetBSD soporta WPA a traves de
&lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?wpa_supplicant+8+NetBSD-current"&gt;wpa_supplicant&lt;/a&gt;  que esta incluido en base.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="configuracion"&gt;
&lt;h2&gt;Configuracion&lt;/h2&gt;
&lt;p&gt;Para conectarnos a un AP usando WPA-Personal necesitamos &lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?wpa_supplicant+8+NetBSD-current"&gt;wpa_supplicant&lt;/a&gt;(8) que contenga al menos:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
/etc/wpa_supplicant.conf

network = {
    ssid=&amp;quot;MYWLAN&amp;quot;
    scan_ssid=1
    key_mgmt=WPA-PSK
    psk=&amp;quot;Mi_llave_psk&amp;quot;
}
&lt;/pre&gt;
&lt;p&gt;Para crear llaves podemos usar &lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?wpa_passphrase++NetBSD-current"&gt;wpa_passphrase&lt;/a&gt;(8)&lt;/p&gt;
&lt;pre class="literal-block"&gt;
#&amp;nbsp;wpa_passphrase&amp;nbsp;myap&amp;nbsp;alguna_clave

network={
  ssid=&amp;quot;myapp&amp;quot;
  psk=39db2863271f7a2ba6549e0941c95154ff339982a7849c71082561eb570e6708
}
&lt;/pre&gt;
&lt;p&gt;Por citar un ejemplo, es importante notar que psk= debe ir sin comillas
ni apostrofes.&lt;/p&gt;
&lt;p&gt;Siempre podremos agregar mas redes a nuestro archivo de configuración
wpa_supplicant.conf, ademas wpa_supplicant soporta muchos protocolos
(WPA, WPA2,IEEE 802.1x) y varios métodos para autentificar (EAP,
PEAP,etc), podremos tener también una red &amp;quot;genérica&amp;quot; para redes abiertas
al publico (En algunos restaurantes, hoteles y aeropuertos) que puede
describirse como sigue:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
network={
    ssid=&amp;quot;any&amp;quot;
    key_mgmt=NONE
    priority=2
}
&lt;/pre&gt;
&lt;p&gt;Al final solo debemos solicitar una IP y navegaremos sin problemas.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="usando-wpa-supplicant"&gt;
&lt;h2&gt;Usando wpa_supplicant&lt;/h2&gt;
&lt;p&gt;Agrega lo siguiente a tu &lt;em&gt;/etc/ifconfig.ral0&lt;/em&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
up
dhcp
&lt;/pre&gt;
&lt;p&gt;y mediante las siguientes lineas en /etc/rc.conf, inmediatamente despues
de &lt;em&gt;wpa_supplicant=YES&lt;/em&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
dhcpcd_flags=&amp;quot;-q&amp;nbsp;-b&amp;quot;
wpa_supplicant=YES
wpa_supplicant_flags=&amp;quot;-B&amp;nbsp;-i&amp;nbsp;ral0&amp;nbsp;-c&amp;nbsp;/etc/wpa_supplicant.conf&amp;quot;
&lt;/pre&gt;
&lt;p&gt;La opcion -B permite correr wpa_supplicant en modo background.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="mas-informacion"&gt;
&lt;h2&gt;Mas informacion:&lt;/h2&gt;
&lt;p&gt;La pagina del manual de &lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?wpa_supplicant.conf+5+NetBSD-current"&gt;wpa_supplicant.conf&lt;/a&gt; contiene toda la informacion del proceso mencionado en este tutorial.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="wifi"></category><category term="redes"></category><category term="wpa"></category></entry><entry><title>PPPoE</title><link href="http://www.netbsd.mx/pppoe.html" rel="alternate"></link><updated>2013-07-14T02:30:00-05:00</updated><author><name>Francisco Valladolid</name></author><id>tag:www.netbsd.mx,2013-07-14:pppoe.html</id><summary type="html">&lt;div class="section" id="introducccion"&gt;
&lt;h2&gt;Introducccion:&lt;/h2&gt;
&lt;p&gt;Algunas ocasiones necesitamos establecer una conexion PPPoE (Point to Point over
Ethernet)  a internet via ADSL, los routers actuales
pueden hacer &lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?pppoe++NetBSD-current"&gt;pppoe&lt;/a&gt; de forma sencilla, sin embargo en algunos entornos donde
se necesita control de la conexion podemos usar nuestro router casero en modo bridge
y usar &lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; como pppoe/router/firewall/dns cache y tener el control de nuestra red
casera.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="requerimientos"&gt;
&lt;h2&gt;Requerimientos:&lt;/h2&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Una PC corriendo &lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; (&lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?pppoe++NetBSD-current"&gt;pppoe&lt;/a&gt; es soportado desde 1.6)&lt;/li&gt;
&lt;li&gt;Dos tarjetas de red (una para el bridge, otra para la red interna)&lt;/li&gt;
&lt;li&gt;Un editor de textos&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="configuracion"&gt;
&lt;h2&gt;Configuracion:&lt;/h2&gt;
&lt;p&gt;Suponiendo fxp0 la interfase que conecta al modem ADSL, editamos
&lt;em&gt;/etc/ifconfig.ppoe&lt;/em&gt; sino existe lo creamos y agregamos lo siguiente:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
create
!&amp;nbsp;/sbin/ifconfig&amp;nbsp;fxp0&amp;nbsp;up
!&amp;nbsp;/sbin/pppoectl&amp;nbsp;-e&amp;nbsp;fxp0&amp;nbsp;$int
!&amp;nbsp;/sbin/pppoectl&amp;nbsp;$int&amp;nbsp;myauthproto=pap&amp;nbsp;'myauthname=tu_nombre_de_usuario' \
     'myauthsecret=tu_password'&amp;nbsp;hisauthproto=none
       inet&amp;nbsp;0.0.0.0&amp;nbsp;0.0.0.1&amp;nbsp;netmask&amp;nbsp;0xffffffff
#!&amp;nbsp;/sbin/route&amp;nbsp;add&amp;nbsp;default&amp;nbsp;-iface&amp;nbsp;0.0.0.1
up
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Agregamos ifwatchd al rc.conf para monitorear la conexion.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;#&amp;nbsp;echo&amp;nbsp;&amp;quot;ifwatchd&amp;nbsp;=&amp;nbsp;YES&amp;quot;&amp;nbsp;&amp;gt;&amp;gt;&amp;nbsp;/etc/rc.conf&lt;/span&gt;&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Es necesario bajar el valor del MTU para las interfaces, un valor MTU
alto quiza cause algunos problemas a nuestra conexion, entonces
modificamos dentro de &lt;em&gt;/etc/sysctl.conf&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;tt class="docutils literal"&gt;&amp;nbsp;net.inet.tcp.mss_ifmtu=1&lt;/tt&gt;&lt;/p&gt;
&lt;p&gt;Si quiere hacer NAT a su red interna, entonces, necesita agregar lo
siguiente a su archivo &lt;em&gt;rc.conf&lt;/em&gt;&lt;/p&gt;
&lt;pre class="literal-block"&gt;
# sysctl -w net.inet.ip.forwarding=1
# echo &amp;quot;ipf=YES&amp;quot; &amp;gt;&amp;gt; /etc/rc.conf
# echo &amp;quot;ipnat=YES&amp;quot; &amp;gt;&amp;gt; /etc/rc.conf
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="haciendo-nat"&gt;
&lt;h2&gt;Haciendo NAT&lt;/h2&gt;
&lt;p&gt;Agregar las reglas nat a ipnat.conf, suponiendo que esta usando
192.168.1.0/24&lt;/p&gt;
&lt;pre class="literal-block"&gt;
map&amp;nbsp;pppoe0&amp;nbsp;192.168.1.0/24&amp;nbsp;-&amp;gt;&amp;nbsp;0/32&amp;nbsp;portmap&amp;nbsp;tcp/udp&amp;nbsp;44000:49999&amp;nbsp;mssclamp 1440
map&amp;nbsp;pppoe0&amp;nbsp;192.168.1.0/24&amp;nbsp;-&amp;gt;&amp;nbsp;0/32&amp;nbsp;mssclamp&amp;nbsp;1440
&lt;/pre&gt;
&lt;p&gt;Con esta configuracion &lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; esta actuando como servidor &lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?pppoe++NetBSD-current"&gt;pppoe&lt;/a&gt; y haciendo NAT a la red inerna
via &lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?ipnat++NetBSD-current"&gt;ipnat&lt;/a&gt; e &lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf++NetBSD-current"&gt;ipf&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="consideraciones"&gt;
&lt;h2&gt;Consideraciones:&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; ahora incluye un filtro de paquetes en base llamado &lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?npf++NetBSD-current"&gt;npf&lt;/a&gt; para hacer NAT y
filtrado de paquetes, la configuracion para ello varia en mucho en comparacion a &lt;a class="reference external" href="http://netbsd.gw.com/cgi-bin/man-cgi?ipf++NetBSD-current"&gt;ipf&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
</summary><category term="pppoe"></category><category term="redes"></category><category term="nat"></category><category term="firewall"></category><category term="ipf"></category><category term="ipnat"></category></entry></feed>