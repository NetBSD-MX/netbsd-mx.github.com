<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Grupo de Usuarios de NetBSD en México</title><link>http://netbsd-mx.github.com/</link><description></description><atom:link href="http://netbsd-mx.github.com/feeds/Redes-tag.rss.xml" rel="self"></atom:link><lastBuildDate>Fri, 02 Nov 2012 09:28:00 -0600</lastBuildDate><item><title>Instalación de NetBSD con Arranque desde Red (PXE)</title><link>http://netbsd-mx.github.com/instalacion-red.html</link><description>&lt;p&gt;&lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; es un Sistema Operativo bastante flexible; en algunos escenarios, tenemos la necesidad de instalar el Sistema Operativo desde red, dentro de un equipo destino que no cuenta con disquetera ni puede arrancar por USB. El CD-ROM de &lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; cuenta con los archivos necesarios para poder instalarse desde red. En éste artículo explicaremos lo necesario para un arranque usando &lt;a class="reference external" href="http://download.intel.com/design/archives/wfm/downloads/pxespec.pdf"&gt;PXE&lt;/a&gt; (Preboot eXecution Environment); el cual es muy usado en la actualidad.&lt;/p&gt;
&lt;div class="section" id="servidor-de-arranque"&gt;
&lt;h2&gt;Servidor de Arranque&lt;/h2&gt;
&lt;p&gt;El servidor de arranque necesita tener activado los servicios de &lt;a class="reference external" href="http://www.isc.org/sw/dhcp"&gt;DHCP&lt;/a&gt;, &lt;a class="reference external" href="https://tools.ietf.org/html/rfc1350"&gt;TFTP&lt;/a&gt; y de manera opcional el servicio de HTTP o FTP donde contendrá los componentes para su instalación.&lt;/p&gt;
&lt;div class="section" id="servicio-de-dhcp"&gt;
&lt;h3&gt;Servicio de DHCP&lt;/h3&gt;
&lt;p&gt;En el servicio de &lt;a class="reference external" href="http://www.isc.org/sw/dhcp"&gt;DHCP&lt;/a&gt;, se deberá de dar de alta una dirección IP fija que será asignada al equipo destino y se indicará la dirección IP del Servidor que tenga el servicio de TFTP en la variable &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;next-server&lt;/span&gt;&lt;/tt&gt;. Si se usa el servidor &lt;a class="reference external" href="http://www.isc.org/sw/dhcp"&gt;DHCP&lt;/a&gt; de ISC la configuración sería similar a la que sigue:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
host MiServidor {
  hardware ethernet 00:AA:11:BB:22:CC;
  fixed-address 192.168.1.105;
  filename &amp;quot;pxeboot_ia32.bin&amp;quot;;
  next-server 192.168.1.101;
  option host-name &amp;quot;nbsd-server&amp;quot;;
  option routers 192.168.1.254;
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="servicio-de-tftp"&gt;
&lt;h3&gt;Servicio de TFTP&lt;/h3&gt;
&lt;p&gt;Para el servidor &lt;a class="reference external" href="https://tools.ietf.org/html/rfc1350"&gt;TFTP&lt;/a&gt; se puede usar la opción que les sea más cómoda, y no requiere de una configuración especial, lo importante aqui es obtener los siguientes archivos del CD-ROM de &lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; y colocarlos en el directorio raíz que provee el servicio de &lt;a class="reference external" href="https://tools.ietf.org/html/rfc1350"&gt;TFTP&lt;/a&gt;:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;amd64/installation/misc/pxeboot_ia32.bin&lt;/tt&gt;&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;amd64/binary/kernel/netbsd-INSTALL.gz&lt;/span&gt;&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En el caso del kernel de instalación llamado &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;netbsd-INSTALL.gz&lt;/span&gt;&lt;/tt&gt;; hay que descomprimirlo usando &lt;tt class="docutils literal"&gt;gunzip&lt;/tt&gt; o  &lt;tt class="docutils literal"&gt;zcat&lt;/tt&gt; y nombrarlo como &lt;tt class="docutils literal"&gt;netbsd&lt;/tt&gt;, aunque el nombre de &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;netbsd-INSTALL&lt;/span&gt;&lt;/tt&gt; puede quedarse si gustan.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="servicio-de-http-o-ftp"&gt;
&lt;h3&gt;Servicio de HTTP o FTP&lt;/h3&gt;
&lt;p&gt;Pueden usar el servidor de su elección y éste servicio es opcional, ya que el asistente de instalación de &lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; preguntará en donde se encuentran los sets de instalación. Para usarlo es colocar en el directorio que provee los archivos del servicio, todo el árbol del CD-ROM de &lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; en el mismo orden.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="equipo-destino"&gt;
&lt;h2&gt;Equipo Destino&lt;/h2&gt;
&lt;p&gt;El equipo destino debe de tener en el ROM de su tarjeta de red el soporte para arranque por &lt;a class="reference external" href="http://download.intel.com/design/archives/wfm/downloads/pxespec.pdf"&gt;PXE&lt;/a&gt;, ésto puede verse en la interfaz de la ROM de la terjeta de red o en el Firmware (BIOS) del equipo. Al equipo le indicaremos que el dispositivo de arranque será la tarjeta de red. Una vez que obtenga los datos del servidor &lt;a class="reference external" href="http://www.isc.org/sw/dhcp"&gt;DHCP&lt;/a&gt;, le indicamos que el kernel de &lt;a class="reference external" href="http://www.netbsd.org"&gt;NetBSD&lt;/a&gt; se encuentra en &lt;a class="reference external" href="https://tools.ietf.org/html/rfc1350"&gt;TFTP&lt;/a&gt;, tecleando &lt;tt class="docutils literal"&gt;boot tftp:netbsd&lt;/tt&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
CLIENT MAC ADDR: 00 AA 11 BB 22 CC  GUID: 564DAF7F-7E8A.0CDE-A2A6-FB54233D2014
CLIENT IP: 192.168.1.105  MASK: 255.255.255.0  DHCP IP: 192.168.1.101
GATEWAY IP: 192.168.1.254;

&amp;gt;&amp;gt; NetBSD/x86 PXE boot, Revision 5.1 (from NetBSD 6.0)
&amp;gt;&amp;gt; Memory: 572/260032 k
Press return to boot now, any other key for boot menu
booting netbsd - starting in 0 seconds.
type &amp;quot;?&amp;quot; or &amp;quot;help&amp;quot; for help.
&amp;gt; boot tftp:netbsd
&lt;/pre&gt;
&lt;p&gt;Descargará el kernel del servidor &lt;a class="reference external" href="https://tools.ietf.org/html/rfc1350"&gt;TFTP&lt;/a&gt;, y una vez arrancado llegará al asistente de instalación.&lt;/p&gt;
&lt;p&gt;Esperemos que éste pequeño artículo les sea de utilidad.&lt;/p&gt;
&lt;/div&gt;
</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">César Yáñez Fernández</dc:creator><pubDate>Fri, 02 Nov 2012 09:28:00 -0600</pubDate><guid>tag:netbsd-mx.github.com,2012-11-02:instalacion-red.html</guid><category>Redes</category><category>PXE</category><category>DHCP</category><category>TFTP</category></item></channel></rss>