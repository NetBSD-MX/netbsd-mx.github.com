<!DOCTYPE html>
<html lang="es">

<head>
  <link rel="stylesheet/less" type="text/css" href="./theme/css/style.less">
  <script src="./theme/js/less-1.3.3.min.js" type="text/javascript"></script>
  <!-- <link rel="stylesheet" type="text/css" href="./theme/css/style.css"> -->

  <link rel="stylesheet" type="text/css" href="./theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width; initial-scale=1.0">
  <meta name="author" content="">
  <meta name="description" content="Posts and writings by ">

    <link href="http://www.netbsd.mx/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Grupo de Usuarios de NetBSD en México Full Atom Feed" />
      <link href="http://www.netbsd.mx/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Grupo de Usuarios de NetBSD en México Full RSS Feed" />
  
  <meta name="keywords" content="perl, web, lighttpd, dancer, cpan">

  <title>
    Perl Dancer y NetBSD  </title>

  </head>

<body>
  <aside>
    <div id="user_meta">
      <a href=".">
                <img src="./theme/images/logo.png" alt="logo">
              </a>
      <h2><a href="."></a></h2>
      <p></p>
      <ul>
                                <li><a href="http://www.netbsd.org" target="_blank">NetBSD</a></li>
                        <li><a href="http://twitter.com/netbsdmx" target="_blank">twitter</a></li>
              </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>Posted on sábado, 13 de julio de 2013</p>
    </header>

    <article>
  <div id="article_title">
    <h3><a href="./dancer.html">Perl Dancer y NetBSD</a></h3>
  </div>
  <div id="article_text">
    <div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#instalacion" id="id1">Instalación</a></li>
<li><a class="reference internal" href="#configuracion" id="id2">Configuración</a></li>
<li><a class="reference internal" href="#contenido" id="id3">Contenido</a></li>
<li><a class="reference internal" href="#referencias" id="id4">Referencias</a></li>
</ul>
</div>
<div class="section" id="instalacion">
<h2><a class="toc-backref" href="#id1">Instalación</a></h2>
<p>Instalamos el servidor <strong>lighttpd</strong>:</p>
<p><tt class="docutils literal">pkg_add<span class="pre">-v</span>lighttpd</tt></p>
<p>Instalamos los módulos de <strong>Perl</strong> con <strong>CPAN</strong> necesarios (algunos de
ellos no están disponibles como paquetes binarios):</p>
<div class="line-block">
<div class="line"><tt class="docutils literal">cpaninstallYAML</tt></div>
<div class="line"><tt class="docutils literal">cpaninstallPlack</tt></div>
<div class="line"><tt class="docutils literal">cpaninstallFCGI</tt></div>
<div class="line"><tt class="docutils literal">cpaninstall<span class="pre">FCGI::ProcManager</span></tt></div>
<div class="line"><tt class="docutils literal">cpaninstallDancer</tt></div>
</div>
</div>
<div class="section" id="configuracion">
<h2><a class="toc-backref" href="#id2">Configuración</a></h2>
<ol class="arabic simple">
<li>Creamos el script de booteo:</li>
</ol>
<p><tt class="docutils literal">cp/usr/pkg/share/examples/rc.d/lighttpd/etc/rc.d</tt></p>
<ol class="arabic simple" start="2">
<li>Lo habilitamos para el inicio:</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">vi/etc/rc.conf</tt></div>
<div class="line"><tt class="docutils literal">lighttpd=YES</tt></div>
</div>
<ol class="arabic simple" start="3">
<li>Habilitamos el módulo de <strong>FastCGI</strong>:</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">vi/usr/pkg/etc/lighttpd/modules.conf</tt></div>
<div class="line"><tt class="docutils literal">server.modules=(</tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">...,</span></tt></div>
<div class="line"><tt class="docutils literal">&quot;mod_fastcgi&quot;</tt></div>
<div class="line"><tt class="docutils literal">)</tt></div>
</div>
<ol class="arabic simple" start="4">
<li>Configuramos el <strong>lighttpd</strong> para el trabajo con <strong>NetBSD</strong>:</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">vi/usr/pkg/etc/lighttpd/lighttpd.conf</tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">var.server_root=&quot;/var/www&quot;</span></tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">#server.event_handler=&quot;linux-sisepoll&quot;</span></tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">#server.network_backend=&quot;linux-sendfile&quot;</span></tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">#server.use_ipv6=&quot;enable&quot;</span></tt></div>
</div>
<ol class="arabic simple" start="5">
<li>Creamos los directorios necesarios:</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">mkdir/var/www/htdocs</tt></div>
<div class="line"><tt class="docutils literal">mkdir/var/log/lighttpd</tt></div>
</div>
<ol class="arabic simple" start="6">
<li>Arreglamos los permisos:</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">groupaddlighttpd</tt></div>
<div class="line"><tt class="docutils literal">useraddlighttpd</tt></div>
<div class="line"><tt class="docutils literal">chown<span class="pre">-R</span>lighttpd:lighttpd/var/log/lighttpd</tt></div>
</div>
</div>
<div class="section" id="contenido">
<h2><a class="toc-backref" href="#id3">Contenido</a></h2>
<ol class="arabic simple">
<li>Creamos una aplicación <strong>Dancer</strong>:</li>
</ol>
<p><tt class="docutils literal">dancer<span class="pre">-a</span><span class="pre">MyWeb::App</span></tt></p>
<ol class="arabic simple" start="2">
<li>Iniciamos la aplicación para crear el socket de conexión:</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">export<span class="pre">PATH=$PATH:/usr/pkg/lib/perl5/site_perl/bin</span></tt></div>
<div class="line"><tt class="docutils literal">cd<span class="pre">MyWeb-App</span></tt></div>
<div class="line"><tt class="docutils literal">plackup<span class="pre">-s</span>FCGI<span class="pre">--listen</span>/tmp/socketbin/app.pl</tt></div>
</div>
<ol class="arabic simple" start="3">
<li>Habilitamos el socket en <strong>lighttpd</strong>:</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">vi/usr/pkg/etc/lighttpd/lighttpd.conf</tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">$HTTP[&quot;url&quot;]</span>=~<span class="pre">&quot;^/app&quot;</span>{</tt></div>
<div class="line"><tt class="docutils literal">fastcgi.server+=(</tt></div>
<div class="line"><tt class="docutils literal">&quot;/app&quot;=&gt;(</tt></div>
<div class="line"><tt class="docutils literal">&quot;&quot;=&gt;(</tt></div>
<div class="line"><tt class="docutils literal">&quot;socket&quot;=&gt;&quot;/tmp/socket&quot;,</tt></div>
<div class="line"><tt class="docutils literal"><span class="pre">&quot;check-local&quot;</span>=&gt;&quot;disable&quot;</tt></div>
<div class="line"><tt class="docutils literal">)</tt></div>
<div class="line"><tt class="docutils literal">)</tt></div>
<div class="line"><tt class="docutils literal">)</tt></div>
<div class="line"><tt class="docutils literal">}</tt></div>
</div>
</div>
<div class="section" id="referencias">
<h2><a class="toc-backref" href="#id4">Referencias</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://search.cpan.org/~xsawyerx/Dancer-1.3091/lib/Dancer/Deployment.pod">perldoc
Dancer::Deployment</a></li>
</ul>
</div>

  </div>
  <div id="article_meta">
    <p>Category: <a href="./category/programacion.html">programacion</a></p>
        <p>Tags:
            <a href="./tag/perl.html">perl</a>,            <a href="./tag/web.html">web</a>,            <a href="./tag/lighttpd.html">lighttpd</a>,            <a href="./tag/dancer.html">dancer</a>,            <a href="./tag/cpan.html">cpan</a>          </p>
      </div>
</article>

    <footer>
      <p><a href="./" class="button_accent">&larr; Back to Index</a></p>
    </footer>

    <div id="ending_message">
      <p>&copy Giulio Fidente. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. You can fork the theme on <a href="https://github.com/giulivo/pelican-svbhack" target="_blank">github</a>.</p>
    </div>
  </main>
</body>
</html>